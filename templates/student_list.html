{% extends 'base.html' %}

{% block title %}Student List{% endblock %}

{% block page_title %}List of Students{% endblock %}

{% block content %}
    <h1>List of Students</h1>

    <form method="POST" action="{{ url_for('student_list') }}">
        <label for="intake">Filter by Intake:</label>
        <select name="intake" id="intake">
            <option value="">All Intakes</option>
            {% for intake in intakes %}
                <option value="{{ intake[0] }}" {% if intake[0] == request.form.get('intake') %}selected{% endif %}>{{ intake[0] }}</option>
            {% endfor %}
        </select>

        <label for="project">Filter by Project:</label>
        <select name="project" id="project">
            <option value="">All Projects</option>
            {% for project in projects %}
                <option value="{{ project[1] }}" {% if project[1] == request.form.get('project') %}selected{% endif %}>{{ project[1] }}</option>
            {% endfor %}
        </select>

        <label for="status">Filter by Status:</label>
        <select name="status" id="status">
            <option value="">All Statuses</option>
            {% for status in statuses %}
                <option value="{{ status[0] }}" {% if status[0] == request.form.get('status') %}selected{% endif %}>{{ status[0] }}</option>
            {% endfor %}
        </select>

        <label for="course">Filter by Course:</label>
        <select name="course" id="course">
            <option value="">All Courses</option>
            {% for course in courses %}
                <option value="{{ course[0] }}" {% if course[0] == request.form.get('course') %}selected{% endif %}>{{ course[0] }}</option>
            {% endfor %}
        </select>

        <button type="submit">Filter</button>
    </form>

    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Email</th>
                <th>Pronunciation</th>
                <th>Project</th>
                <th>Intake</th>
                <th>Course</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for student in students %}
                <tr>
                    <td>{{ student[0] }}</td>
                    <td>{{ student[1] }}</td>
                    <td>{{ student[2] }}</td>
                    <td>{{ student[3] }}</td>
                    <td>{{ student[4] }}</td>
                    <td>{{ student[5] }}</td>
                    <td>{{ student[6] }}</td>
                    <td>{{ student[7] }}</td>
                    <td><a href="/view/{{ student[0] }}">View</a> | <a href="/edit/{{ student[0] }}">Edit</a></td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}

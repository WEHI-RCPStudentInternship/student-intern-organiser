{% extends 'base.html' %}

{% block title %}Email {{ intake[1] }} Intake{% endblock %}

{% block page_title %}Email {{ intake[1] }} Intake{% endblock %}

{% block top_links_menu %}
    <!-- Your top links menu goes here if needed -->
        <a href="/add_intake" >Add Intake</a>
        <a href="/add_weekly_email/{{ intake_id }}" >Add Weekly Email</a>
{% endblock %}

{% block content %}


    <h1>Email {{ intake[1] }} Intake Table</h1>
    
    <table id="emailScheduleTable" class="display" style="width:600px">
        <thead>
            <tr>
                <th>Week #</th>
                <th>Date for interns</th>
            </tr>
        </thead>
        <tbody>
            {% for table_row in table_rows %}
            <tr>
                <td>{{ table_row["week_number"] }}</td>
                <td>
                    <div style="margin-bottom: 5px;"><strong>{{ table_row["date_for_interns"] }}</strong></div>
                    <a target="_blank" href="mailto:{{ student_emails }}?subject={{ table_row["subject"] }}&body={{ table_row["body"] }}" class="btn btn-primary btn-sm">Email</a>
                    <a target="_blank" href="mailto:{{ all_student_emails }}?subject={{ table_row["subject"] }}&body={{ table_row["body"] }}" class="btn btn-success btn-sm" style="margin-left:5px;">Email All</a>
                    <a href="/edit_email_template/{{ table_row['id'] }}" class="btn btn-secondary btn-sm">Edit</a>
                    {% if table_row["week_number"] == '1 - First week' %}
                        <a href="/edit_email_template/{{ table_row['id'] }}" class="btn btn-warning btn-sm">Edit Date</a>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}

{% block jQuery_scripts %}
    // Disable DataTables for this table to preserve chronological order
    console.log('Email intake table loaded without DataTables');
{% endblock %}


{% extends 'base.html' %}

{% block title %}Add Weekly Email{% endblock %}

{% block page_title %}Add Weekly Email{% endblock %}

{% block top_links_menu %}
<a href="/email_intake/{{ intake_id }}">Back to Email Intake</a>
{% endblock %}

{% block content %}
<div class="edit-email-template-page">
    <h1>Add Weekly Email for {{ intake_name }} Intake</h1>
    
    <form method="POST" action="/add_weekly_email/{{ intake_id }}">
        <div class="form-group">
            <label for="week_number">Week Number</label>
            <input type="number" class="form-control" id="week_number" name="week_number" min="0" max="52" required>
            <small class="form-text text-muted">Enter the week number (e.g., 3 for third week, 15 for fifteenth week)</small>
        </div>
        
        <div class="form-group">
            <label for="week_description">Week Description</label>
            <input type="text" class="form-control" id="week_description" name="week_description" placeholder="e.g., Third week, Mid-internship check-in" required>
            <small class="form-text text-muted">Brief description of this week/milestone</small>
        </div>
        
        <div class="form-group">
            <label for="subject">Email Subject</label>
            <input type="text" class="form-control" id="subject" name="subject" required>
            <small class="form-text text-muted">Subject line for the email</small>
        </div>
        
        <div class="form-group">
            <label for="body">Email Body</label>
            <textarea class="form-control" id="body" name="body" rows="10" required placeholder="Hi All,

This is your email for week..."></textarea>
            <small class="form-text text-muted">Content of the email to be sent to students</small>
        </div>
        
        <div class="alert alert-info">
            <strong>Note:</strong> The email date will be automatically calculated based on the intake start date and will be scheduled for the Monday of the specified week. The email will be inserted in chronological order with other weekly emails.
        </div>
        
        <button type="submit" class="btn btn-primary">Add Weekly Email</button>
        <a href="/email_intake/{{ intake_id }}" class="btn btn-secondary">Cancel</a>
    </form>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Auto-resize textarea based on content
    $(document).ready(function() {
        $('textarea').each(function() {
            this.style.height = 'auto';
            this.style.height = this.scrollHeight + 'px';
        });
    });
</script>
{% endblock %}
